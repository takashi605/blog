apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: {{ include "api.appname" . }}
  labels:
    app.kubernetes.io/name: {{ include "api.appname" . }}
    {{- include "blog-chart.labels" . | nindent 4 }}
  metallb.universe.tf/address-pool: default-addresspool
  metallb.universe.tf/ip-address: "192.168.1.1"
spec:
  rules:
    - {{- if .Values.api.ingress.host }}
      host: {{ .Values.api.ingress.host }}
      {{- end }}
      http:
        paths:
        - pathType: {{ .Values.api.ingress.pathType }}
          path: {{ .Values.api.ingress.path }}
          backend:
            service:
              name: {{ include "api.appname" . }}
              port:
                number: {{ .Values.api.service.port }}
